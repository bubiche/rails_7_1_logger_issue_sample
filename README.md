# Rails 7.1 nil logger sample app

- Sample app for https://github.com/rails/rails/issues/52391
- Most of the code here are generated by `rails new`. The only additions are:
  - `lib/secret_loader.rb`
  - `require "secret_loader"` in `config/application.rb`
  - `timeout: <%= SecretLoader.get("my_secret_timeout") %>` in `config/database.yml`

# Issue reproduction

The repo as-is uses rails 7.0.8.4 and the commands below work:

```bash
bundle install
bin/rails assets:clobber
```

Upgrading rails version to 7.1.3.4 in `Gemfile` and use `config.load_defaults 7.1` in `config/application.rb` (or keeping it as 7.0):

```bash
bundle install
bin/rails assets:clobber
```

Error:

```
bin/rails aborted!
NoMethodError: undefined method `info' for nil:NilClass (NoMethodError)

    Rails.logger.info("Log from SecretLoader")
                ^^^^^
/path/to/lib/secret_loader.rb:3:in `get'
/path/to/config/database.yml:10:in `<main>'
```
